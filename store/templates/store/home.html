{% extends 'store/base.html' %}

{% block title %}Home - FitPower Hub{% endblock %}

{% block content %}
<!-- Hero Section -->
<div class="hero-section"
    style="background: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7)), url('https://images.unsplash.com/photo-1534367507877-0edd93bd013b?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80'); background-size: cover; background-position: center; color: white; padding: 100px 0; margin-bottom: 30px;">
    <div class="container text-center">
        <h1 class="display-4 mb-4">Transform Your Body, Fuel Your Passion</h1>
        <p class="lead mb-4">Best supplements, equipment, and personalized nutrition plans</p>
        <a href="{% url 'product_list' %}" class="btn btn-warning btn-lg me-2">Shop Now</a>
        <a href="{% url 'api_demo' %}" class="btn btn-outline-light btn-lg">API Demo</a>
    </div>
</div>

<div class="container">
    <!-- Featured Products section -->
    <div class="row mb-5">
        <div class="col-12">
            <h2 class="mb-4">Featured Products</h2>
            <div class="row">
                {% for product in featured_products %}
                <div class="col-md-3 col-sm-6 mb-4">
                    <div class="card h-100">
                        <div class="image-container" style="height: 200px; overflow: hidden;">
                            {% if product.image and product.image.url %}
                            <img src="{{ product.image.url }}" class="card-img-top product-image"
                                alt="{{ product.name }}" style="height: 100%; width: 100%; object-fit: cover;"
                                onerror="this.onerror=null; this.src='https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?ixlib=rb-1.2.1&auto=format&fit=crop&w=300&h=200&q=80'">

                            {% elif product.category == 'SUP' %}
                            <img src="https://69372ddd5e1b4138a35800c9.imgix.net/png-transparent-dietary-supplement-bodybuilding-supplement-personal-trainer-nutrition-bodybuilding-physical-fitness-we.png"
                                class="card-img-top product-image" alt="Supplement"
                                style="height: 100%; width: 100%; object-fit: cover;">

                            {% elif product.category == 'CLO' %}
                            <img src="https://images.unsplash.com/photo-1595950653106-6c9ebd614d3a?ixlib=rb-1.2.1&auto=format&fit=crop&w=300&h=200&q=80"
                                class="card-img-top product-image" alt="Clothing"
                                style="height: 100%; width: 100%; object-fit: cover;">

                            {% elif product.category == 'EQU' %}
                            <img src="https://images.unsplash.com/photo-1536922246289-88c42f957773?ixlib=rb-1.2.1&auto=format&fit=crop&w=300&h=200&q=80"
                                class="card-img-top product-image" alt="Equipment"
                                style="height: 100%; width: 100%; object-fit: cover;">

                            {% elif product.category == 'FOO' %}
                            <img src="https://images.unsplash.com/photo-1490818387583-1baba5e638af?ixlib=rb-1.2.1&auto=format&fit=crop&w=300&h=200&q=80"
                                class="card-img-top product-image" alt="Healthy Food"
                                style="height: 100%; width: 100%; object-fit: cover;">

                            {% else %}
                            <img src="https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?ixlib=rb-1.2.1&auto=format&fit=crop&w=300&h=200&q=80"
                                class="card-img-top product-image" alt="Fitness product"
                                style="height: 100%; width: 100%; object-fit: cover;">
                            {% endif %}
                        </div>

                        <div class="card-body d-flex flex-column">
                            <h5 class="card-title">{{ product.name }}</h5>
                            <p class="card-text text-muted">{{ product.description|truncatechars:60 }}</p>

                            <span class="badge 
                                {% if product.category == 'SUP' %}bg-primary
                                {% elif product.category == 'CLO' %}bg-success
                                {% elif product.category == 'EQU' %}bg-warning
                                {% elif product.category == 'FOO' %}bg-danger
                                {% else %}bg-secondary{% endif %} mb-2">
                                {{ product.get_category_display }}
                            </span>

                            {% if product.protein_per_serving %}
                            <div class="mt-auto">
                                <span class="badge bg-info nutri-badge">Protein: {{ product.protein_per_serving
                                    }}g</span>
                                <span class="badge bg-success nutri-badge">Carbs: {{ product.carbs_per_serving
                                    }}g</span>
                            </div>
                            {% endif %}

                            <div class="d-flex justify-content-between align-items-center mt-2">
                                <span class="h5 mb-0 text-primary">${{ product.price }}</span>
                                <a href="{% url 'product_detail' product.id %}"
                                    class="btn btn-sm btn-outline-primary">View Details</a>
                            </div>
                        </div>
                    </div>
                </div>
                {% empty %}
                <div class="col-12">
                    <div class="alert alert-warning">
                        <h5>No products available</h5>
                        <p class="mb-0">No featured products found.
                            <a href="{% url 'product_list' %}" class="alert-link">Browse all products</a>
                        </p>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>

    <!-- API Demo Section -->
    <div class="row mb-5">
        <div class="col-12">
            <div class="card bg-dark text-white">
                <div class="row g-0">
                    <div class="col-md-6">
                        <div class="card-body p-5">
                            <h2 class="card-title">REST API with Django REST Framework</h2>
                            <p class="card-text">Explore our RESTful API built with Django REST Framework. Access
                                products, categories, and order data programmatically.</p>
                            <ul class="list-unstyled">
                                <li><i class="fas fa-check text-success me-2"></i> CRUD operations for products</li>
                                <li><i class="fas fa-check text-success me-2"></i> Filtering and search capabilities
                                </li>
                                <li><i class="fas fa-check text-success me-2"></i> Authentication support</li>
                                <li><i class="fas fa-check text-success me-2"></i> Pagination and ordering</li>
                            </ul>
                            <a href="{% url 'api_demo' %}" class="btn btn-warning btn-lg">View API Demo</a>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card-body p-5 bg-light text-dark">
                            <h4 class="text-dark">API Endpoints</h4>
                            <div class="mt-3">
                                <code class="d-block mb-2">GET /store/api/products/</code>
                                <code class="d-block mb-2">GET /store/api/products/{id}/</code>
                                <code class="d-block mb-2">GET /store/api/categories/</code>
                                <code class="d-block mb-2">GET /store/api/stats/</code>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Categories -->
    <div class="row mb-5">
        <div class="col-12">
            <h2 class="mb-4">Shop by Category</h2>
            <div class="row">
                <div class="col-md-3 col-sm-6 mb-4">
                    <div class="card text-center h-100">
                        <div class="card-body d-flex flex-column">
                            <i class="fas fa-capsules fa-3x text-primary mb-3"></i>
                            <h5 class="card-title">Supplements</h5>
                            <p class="card-text">Proteins, creatine, vitamins and more</p>
                            <div class="mt-auto">
                                <a href="{% url 'product_list' %}?type=SUP" class="btn btn-outline-primary">View
                                    Products</a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-3 col-sm-6 mb-4">
                    <div class="card text-center h-100">
                        <div class="card-body d-flex flex-column">
                            <i class="fas fa-tshirt fa-3x text-success mb-3"></i>
                            <h5 class="card-title">Sportswear</h5>
                            <p class="card-text">Clothing for your workouts</p>
                            <div class="mt-auto">
                                <a href="{% url 'product_list' %}?type=CLO" class="btn btn-outline-success">View
                                    Products</a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-3 col-sm-6 mb-4">
                    <div class="card text-center h-100">
                        <div class="card-body d-flex flex-column">
                            <i class="fas fa-dumbbell fa-3x text-warning mb-3"></i>
                            <h5 class="card-title">Equipment</h5>
                            <p class="card-text">Weights, bands, accessories</p>
                            <div class="mt-auto">
                                <a href="{% url 'product_list' %}?type=EQU" class="btn btn-outline-warning">View
                                    Products</a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-3 col-sm-6 mb-4">
                    <div class="card text-center h-100">
                        <div class="card-body d-flex flex-column">
                            <i class="fas fa-apple-alt fa-3x text-danger mb-3"></i>
                            <h5 class="card-title">Healthy Food</h5>
                            <p class="card-text">Nutritious snacks and foods</p>
                            <div class="mt-auto">
                                <a href="{% url 'product_list' %}?type=FOO" class="btn btn-outline-danger">View
                                    Products</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- JavaScript to handle failed images -->
<script>
    document.addEventListener('DOMContentLoaded', function () {
        // Manejar imÃ¡genes que no cargan
        const images = document.querySelectorAll('.product-image');
        const fallbackImage = 'https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?ixlib=rb-1.2.1&auto=format&fit=crop&w=300&h=200&q=80';

        images.forEach(img => {
            img.addEventListener('error', function () {
                this.src = fallbackImage;
            });
        });
    });
</script>

<style>
    .product-image {
        transition: transform 0.3s ease;
    }

    .product-image:hover {
        transform: scale(1.05);
    }

    .card {
        transition: box-shadow 0.3s ease;
    }

    .card:hover {
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
    }

    .nutri-badge {
        font-size: 0.75rem;
        margin-right: 0.25rem;
    }

    .image-container {
        background-color: #f8f9fa;
    }
</style>
{% endblock %}